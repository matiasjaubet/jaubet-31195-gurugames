(window.webpackJsonpvtex_store_components_3_159_4=window.webpackJsonpvtex_store_components_3_159_4||[]).push([["Newsletter"],{0:function(e,t){e.exports=React},1:function(e,t){e.exports=R},130:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.pixel-manager@1.x/PixelContext"]},131:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"subscribeNewsletter"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"context"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sender"},value:{kind:"StringValue",value:"vtex.store-components@3.159.4",block:!1}}]},{kind:"Directive",name:{kind:"Name",value:"runtimeMeta"},arguments:[{kind:"Argument",name:{kind:"Name",value:"hash"},value:{kind:"StringValue",value:"f80470878e1732104e654d28a886b293d2a13e781c758b25128a4bb53ccb1df4",block:!1}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subscribeNewsletter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}],directives:[]}]}}],loc:{start:0,end:223}};n.loc.source={body:'mutation subscribeNewsletter($email: String) @context(sender: "vtex.store-components@3.159.4") @runtimeMeta(hash: "f80470878e1732104e654d28a886b293d2a13e781c758b25128a4bb53ccb1df4") {\n  subscribeNewsletter(email: $email)\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&n.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=n,e.exports.subscribeNewsletter=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=a[t]||new Set,o=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var s=c;c=new Set,s.forEach((function(e){o.has(e)||(o.add(e),(a[e]||new Set).forEach((function(e){c.add(e)})))}))}return o.forEach((function(t){var a=i(e,t);a&&n.definitions.push(a)})),n}(n,"subscribeNewsletter")},177:function(e,t,n){"use strict";n.r(t),function(e){var t=n(3);n.p=Object(t.getPublicPath)("vtex.store-components@3.159.4");var a=Object(t.register)((function(){return n(243)}),e,"vtex.store-components@3.159.4","vtex.store-components@3.x","Newsletter");a.renderHotReload,a.setupHMR}.call(this,n(15)(e))},18:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.native-types@0.x/formatIOMessage"]},23:function(e,t){e.exports=ReactApollo},243:function(e,t,n){"use strict";n.r(t);var a=n(24),i=n(25),r=n(31),o=n(26),c=n(27),s=n(16),l=n(5),u=n(0),d=n.n(u),m=n(23),f=n(1),p=n(4),v=n(54),b=n.n(v),h=n(29),N=n.n(h),E=n(68),w=n.n(E),_=n(18),x=n.n(_),k=n(130),g=n.n(k),S=n(131),O=n.n(S);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var R=/^[A-z0-9+_-]+(?:\.[A-z0-9+_-]+)*@(?:[A-z0-9](?:[A-z0-9-]*[A-z0-9])?\.)+[A-z0-9](?:[A-z0-9-]*[A-z0-9])?$/,j=function(e){Object(o.a)(n,e);var t=y(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(l.a)(Object(r.a)(e),"state",{email:"",loading:!1,error:null,success:null,invalidEmail:!1}),Object(l.a)(Object(r.a)(e),"inputRef",d.a.createRef()),Object(l.a)(Object(r.a)(e),"handleChangeEmail",(function(t){e.setState({email:t.target.value.trim()})})),Object(l.a)(Object(r.a)(e),"validateEmail",(function(){return R.test(e.state.email)})),Object(l.a)(Object(r.a)(e),"handleSubmit",(function(t){if(t.preventDefault(),!e.validateEmail())return e.setState({invalidEmail:!0}),void(e.inputRef&&e.inputRef.current&&e.inputRef.current.focus());e.setState({invalidEmail:!1,loading:!0,error:null,success:null}),e.props.subscribeNewsletter({variables:{email:e.state.email}}).then((function(){e.safeSetState({success:!0,loading:!1})})).catch((function(){e.safeSetState({error:!0,loading:!1})}))})),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.push({event:"newsletterInput"})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"safeSetState",value:function(){this.mounted&&this.setState.apply(this,arguments)}},{key:"render",value:function(){var e=this.props,t=e.hideLabel,n=e.intl,a=e.submit,i=e.label,r=e.placeholder,o=e.handles,c=x()({id:a,intl:n}),s=x()({id:i,intl:n}),l=x()({id:r,intl:n}),m=x()({id:"store/newsletter.confirmationTitle",intl:n}),f=x()({id:"store/newsletter.confirmationText",intl:n}),p=x()({id:"store/newsletter.invalidEmail",intl:n}),v=x()({id:"store/newsletter.error",intl:n});return d.a.createElement("div",{className:"".concat(o.newsletter," ").concat(this.state.success?o.confirmation:""," w-100")},d.a.createElement("div",{className:"".concat(o.container," mw9 mr-auto ml-auto pv9")},this.state.success?d.a.createElement(u.Fragment,null,d.a.createElement("div",{className:"".concat(o.confirmationTitle," t-heading-3 pb4 tc")},m),d.a.createElement("div",{className:"".concat(o.confirmationText," t-body tc")},f)):d.a.createElement("form",{className:"".concat(o.form," mw6 center tc ph5 ph0-ns")},d.a.createElement("label",{className:"".concat(o.label," t-heading-3 tc ").concat(t?"dn":""),htmlFor:"newsletter-input"},s),d.a.createElement("div",{className:"".concat(o.inputGroup," flex-ns pt5")},d.a.createElement(b.a,{ref:this.inputRef,id:"newsletter-input",errorMessage:this.state.invalidEmail?p:null,placeholder:l,name:"newsletter",value:this.state.email,onChange:this.handleChangeEmail}),d.a.createElement("div",{className:"".concat(o.buttonContainer," pl4-ns flex-none pt3 pt0-ns")},d.a.createElement(N.a,{variation:"primary",type:"submit",onClick:this.handleSubmit,isLoading:this.state.loading},c))),this.state.error&&d.a.createElement("div",{className:"".concat(o.error," c-danger t-body pt5")},v))))}}]),n}(u.Component),D=Object(f.compose)(Object(m.graphql)(O.a,{name:"subscribeNewsletter"}),w()(["newsletter","confirmation","container","confirmationTitle","confirmationText","form","inputGroup","buttonContainer","label","error"]),p.injectIntl,g.a.withPixel)(j);j.defaultProps={hideLabel:!1,showTerms:!1},D.getSchema=function(){return{title:"admin/editor.newsletter.title",description:"admin/editor.newsletter.description",type:"object",properties:{hideLabel:{type:"boolean",title:"admin/editor.newsletter.hideLabel",default:!1,isLayout:!0}}}};var C=D;t.default=C},29:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Button"]},4:function(e,t){e.exports=ReactIntl},54:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.styleguide@9.x/Input"]},68:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@1.x/withCssHandles"]}},[[177,"common"]]]);