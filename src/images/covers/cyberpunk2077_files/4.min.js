(window.webpackJsonpvtex_search_result_3_117_3=window.webpackJsonpvtex_search_result_3_117_3||[]).push([[4],{11:function(e,t,r){"use strict";r.r(t),r.d(t,"MAP_CATEGORY_CHAR",(function(){return c})),r.d(t,"MAP_BRAND_CHAR",(function(){return a})),r.d(t,"MAP_QUERY_KEY",(function(){return n})),r.d(t,"FULLTEXT_QUERY_KEY",(function(){return u})),r.d(t,"SELLER_QUERY_KEY",(function(){return i})),r.d(t,"PRODUCT_CLUSTER_IDS",(function(){return o})),r.d(t,"MAP_VALUES_SEP",(function(){return s})),r.d(t,"PATH_SEPARATOR",(function(){return f})),r.d(t,"SPACE_REPLACER",(function(){return l})),r.d(t,"FILTER_TITLE_SEP",(function(){return d})),r.d(t,"SPEC_FILTER",(function(){return p})),r.d(t,"SPEC_FILTERS",(function(){return b})),r.d(t,"SET_GALLERY_LAYOUTS_TYPE",(function(){return O})),r.d(t,"SWITCH_GALLERY_LAYOUT_TYPE",(function(){return h})),r.d(t,"SET_FOCUS_GALLERY_LAYOUT_TYPE",(function(){return y})),r.d(t,"ASC",(function(){return v})),r.d(t,"DESC",(function(){return j}));var c="c",a="b",n="map",u="ft",i="seller",o="productClusterIds",s=",",f="/",l="-",d="_",p="specificationFilter",b="SpecificationFilters",O="SET_GALLERY_LAYOUTS",h="SWITCH_GALLERY_LAYOUT",y="SET_FOCUS_GALLERY_LAYOUT",v="ASC",j="DESC"},35:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var c=10},43:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return l}));var c=r(13),a=r(1),n=r(11);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o=function(e,t){var r=e&&e.split(n.PATH_SEPARATOR)||[],c=t&&t.split(n.MAP_VALUES_SEP)||[],u=Object(a.zipObj)(c,r);return{ft:u.ft,productClusterIds:u.productClusterIds,seller:u.seller}},s=function(e,t,r){if(!t||!e)return[];var c,a=e.split("/"),n=decodeURIComponent(t).split(","),u=a.length>=n.length?n.map((function(e,t){if("ft"===e)try{c=decodeURI(a[t])}catch(e){c=a[t]}return{key:n[t],value:a[t]}})):[];return r&&u.push({key:"priceRange",value:r}),[u,c]},f=function(e){e.forEach((function(e){return e.facets.forEach((function(e){return function e(t){t.map=t.key,t.children&&t.children.forEach((function(t){return e(t)}))}(e)}))}));var t=Object(a.groupBy)((function(e){return e.type}))(e);return{brands:Object(a.pathOr)([],["BRAND",0,"facets"],t),brandsQuantity:t&&t.BRAND&&t.BRAND[0]&&null!=t.BRAND[0].quantity?t.BRAND[0].quantity:0,specificationFilters:(t.NUMBER||[]).concat(t.TEXT||[]),categoriesTrees:Object(a.pathOr)([],["CATEGORYTREE",0,"facets"],t),priceRanges:Object(a.pathOr)([],["PRICERANGE",0,"facets"],t).map((function(e){return i(i({},e),{},{slug:"de-".concat(e.range.from,"-a-").concat(e.range.to)})}))}},l=function(e){return e.reduce((function(e,t,r){return e.query+="".concat(r>0?"/":"").concat(t.value),e.map+="".concat(r>0?",":"").concat(t.key),e}),{query:"",map:""})}},97:function(e,t,r){"use strict";var c=r(12),a=r(47),n=r.n(a),u=r(8),i=r(13),o=r(74),s=r(0),f=r(38),l=r(7),d=r(75),p=r.n(d),b=r(76),O=r.n(b),h=r(77),y=r.n(h),v=r(43),j=r(35),E=function(){var e=Object(l.useRuntime)().navigate;return{setRedirect:function(t){if(t){var r=/((http(s)?:)?\/\/|www\.)/;if(r.test(t)){var c=t.replace(r,""),a=window.location.origin.replace(/(http(s)?:)?\/\//,"");c.startsWith(a)?e({to:c.replace(a,"")}):window.location.replace(t.replace(/^www/,"https://www"))}else e({to:t})}}}};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g="Static",R="MAX_WITHOUT_INTEREST",_="ALL_AVAILABLE",T="default",A="OrderByScoreDESC",P=function(e,t){return!!(e&&e.length>0&&t&&t.length>0)},L=function(e,t){return e.current!==t},w=function(e,t){var r,c=Object(l.useRuntime)(),a=c.getSettings,i=c.query,d=null===(r=a("vtex.store"))||void 0===r?void 0:r.enableFiltersFetchOptimization,b=Object(f.useQuery)(p.a,{variables:e}),h=b.refetch,E=b.loading,S=b.fetchMore,R=Object(f.useQuery)(O.a,{variables:{query:e.query,fullText:e.fullText,selectedFacets:e.selectedFacets}}).data,_=(R=void 0===R?{}:R).searchMetadata,T=Object(f.useQuery)(y.a,{variables:{query:t.facetQuery,map:t.facetMap,from:d?0:void 0,to:d?j.a:void 0,fullText:e.fullText,selectedFacets:e.selectedFacets,hideUnavailableItems:e.hideUnavailableItems,behavior:e.facetsBehavior||g,categoryTreeBehavior:e.categoryTreeBehavior,operator:e.operator,fuzzy:e.fuzzy,searchState:e.searchState||void 0,initialAttributes:(null==i?void 0:i.initialMap)||t.facetMap},skip:!t.withFacets}),A=T.data,P=(A=void 0===A?{}:A).facets,L=T.loading,w=T.refetch,C=T.fetchMore,F=function(e,t){return Object(s.useCallback)(function(){var r=Object(o.a)(n.a.mark((function r(c){var a,i,o,s,f,l,d,p,b,O,h,y,j,E,S,g,R,_,T;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c&&(o=c.query,s=c.map,f=c.priceRange,l=c.facetQuery,d=c.facetMap,a=m(m({},c),{},{withFacets:!1}),i={query:c.facetQuery,map:c.facetMap,hideUnavailableItems:c.hideUnavailableItems,behavior:c.facetsBehavior},o&&s&&(p=Object(v.b)(o,s,f),b=Object(u.a)(p,2),O=b[0],h=b[1],a=m(m({},a),{},{selectedFacets:O,fullText:h})),l&&d&&(y=Object(v.b)(l,d,f),j=Object(u.a)(y,2),E=j[0],S=j[1],i=m(m({},i),{},{selectedFacets:E,fullText:S}))),r.next=3,Promise.all([e&&e(a),t&&t(i)]);case 3:return g=r.sent,R=Object(u.a)(g,2),_=R[0],T=R[1],r.abrupt("return",m(m({},_),{},{data:m(m({},_.data||{}),{},{facets:T.data&&T.data.facets}),errors:_.errors||T.errors}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),[e,t])}(h,w),I=P&&P.facets?Object(v.c)(P.facets):{brands:[],brandsQuantity:0,specificationFilters:[],categoriesTrees:[],priceRanges:[]},U=P&&P.queryArgs&&P.queryArgs.selectedFacets,M=U&&Object(v.a)(U),Y=b&&b.data&&b.data.productSearch&&b.data.productSearch.redirect;return{loading:E||Y,facetsLoading:L,fetchMore:S,data:{productSearch:b.data&&b.data.productSearch,facets:m(m({},I),{},{queryArgs:M,breadcrumb:P&&P.breadcrumb,facetsFetchMore:C,sampling:null==P?void 0:P.sampling}),searchMetadata:_},productSearchResult:b,refetch:F}};t.a=function(e){var t,r=e.maxItemsPerPage,a=e.query,n=e.map,i=e.orderBy,o=e.priceRange,f=e.hideUnavailableItems,d=e.facetsBehavior,p=e.categoryTreeBehavior,b=e.pageQuery,O=e.skusFilter,h=e.simulationBehavior,y=e.installmentCriteria,j=e.excludedPaymentSystems,S=e.includedPaymentSystems,C=e.children,F=e.operator,I=e.fuzzy,U=e.searchState,M=e.lazyItemsQuery,Y=e.__unstableProductOriginVtex,B=Object(v.b)(a,n,o),x=Object(u.a)(B,2),D=x[0],z=x[1],Q=null===(t=(0,Object(l.useRuntime)().getSettings)("vtex.store"))||void 0===t?void 0:t.enableLazySearchQuery,q=r>18&&("boolean"==typeof M?M:Q),k=q?18:r,G=function(e,t,r,c){var a=Object(s.useRef)(e),n=Object(s.useRef)(t),u=Object(s.useRef)(r),i=Object(s.useRef)(c);return L(a,e)||L(n,t)||L(u,r)||L(i,c)}(a,n,i,o),N=function(e,t){var r=Object(s.useRef)(e);return t&&(r.current=1),r.current}(b?parseInt(b,10):1,G),H=function(e,t,r,c){var a=Object(s.useRef)(c),n=L(a,c),u={fuzzy:n?void 0:e,operator:n?void 0:t,searchState:n?void 0:r};return a.current=c,u}(I,F,U,z),V=H.fuzzy,W=H.operator,K=H.searchState,X=E().setRedirect,J=(N-1)*r,Z=J+k-1,$={facetQuery:a,facetMap:n,withFacets:P(n,a)},ee=Object(s.useMemo)((function(){return{map:n,query:a,orderBy:i||A,from:J,to:Z,selectedFacets:D,fullText:z,operator:W,fuzzy:V,searchState:K,excludedPaymentSystems:j,includedPaymentSystems:S,productOriginVtex:!!Y,hideUnavailableItems:!!f,facetsBehavior:d||g,categoryTreeBehavior:p,withFacets:!1,skusFilter:O||_,simulationBehavior:h||T,installmentCriteria:y||R}}),[n,a,i,J,Z,f,d,p,O,h,y,D,z,W,V,K,Y,j,S]),te=w(ee,$),re=te.data,ce=te.loading,ae=te.refetch,ne=te.productSearchResult,ue=te.facetsLoading,ie=te.fetchMore,oe=re&&re.productSearch&&re.productSearch.redirect;Object(s.useEffect)((function(){X(oe)}),[oe,X]);var se=Object(s.useRef)(!1),fe=Object(s.useState)(q?r-k:0),le=Object(u.a)(fe,2),de=le[0],pe=le[1];Object(s.useEffect)((function(){pe(q?r-k:0)}),[n,a,J,q,r,k]),Object(s.useEffect)((function(){if(q){var e=setTimeout((function(){0===de||se.current||(se.current=!0,ie({variables:{from:J+18,to:J+r-1},updateQuery:function(e,t){var r=t.fetchMoreResult;return se.current=!1,pe(0),m(m({},e),{},{productSearch:m(m({},e.productSearch),{},{products:[].concat(Object(c.a)(e.productSearch.products),Object(c.a)(r.productSearch.products))})})}}))}),500);return function(){clearTimeout(e)}}}),[re,ie,J,q,r,de,k]);var be=Object(s.useMemo)((function(){return m(m(m({},ee),$),{},{maxItemsPerPage:r,lazyItemsRemaining:de,page:N,facetsLoading:ue})}),[ee,$,r,de,N,ue]);return C(Object(s.useMemo)((function(){return m(m({},ne||{}),{},{variables:ee,data:re,loading:ce,refetch:ae})}),[re,ce,ne,ae,ee]),be)}}}]);